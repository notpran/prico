(()=>{var e={};e.id=284,e.ids=[284],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1437:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},7561:e=>{"use strict";e.exports=require("node:fs")},9411:e=>{"use strict";e.exports=require("node:path")},1804:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>m,tree:()=>l}),t(6127),t(6126),t(3498);var r=t(9658),i=t(9678),a=t(321),n=t.n(a),o=t(1519),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);t.d(s,c);let l=["",{children:["communities",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6127)),"/workspaces/prico/apps/frontend/app/communities/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6126)),"/workspaces/prico/apps/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,3498,23)),"next/dist/client/components/not-found-error"]}],u=["/workspaces/prico/apps/frontend/app/communities/page.tsx"],d="/communities/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/communities/page",pathname:"/communities",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},9393:(e,s,t)=>{Promise.resolve().then(t.bind(t,8364))},8364:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var r=t(4633),i=t(5608),a=t(6426),n=t(13),o=t(333);function c(){let[e,s]=(0,i.useState)([]),[t,c]=(0,i.useState)(!0),[l,u]=(0,i.useState)(!1),[d,p]=(0,i.useState)(""),[m,x]=(0,i.useState)(""),[h,g]=(0,i.useState)("public"),{getToken:f,isSignedIn:b}=(0,a.y)();return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-semibold tracking-tight",children:"Communities"}),r.jsx(n.z,{onClick:()=>u(!0),disabled:!b,children:"Create Community"})]}),t?r.jsx("p",{className:"text-muted-foreground",children:"Loadingâ€¦"}):0===e.length?r.jsx("p",{className:"text-muted-foreground",children:"No communities yet."}):r.jsx("ul",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,r.jsxs)("li",{className:"rounded border p-4",children:[r.jsx("div",{className:"font-medium",children:r.jsx(o.default,{href:`/community/${e._id}`,className:"hover:underline",children:e.name})}),e.description&&r.jsx("div",{className:"text-muted-foreground text-sm",children:e.description}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground mt-2",children:[e.members??0," members"]})]},e._id))}),l&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-background rounded border p-4 w-full max-w-sm space-y-3",children:[r.jsx("h3",{className:"font-semibold",children:"Create Community"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-sm",children:"Name"}),r.jsx("input",{className:"w-full border rounded px-2 py-1 bg-background",value:d,onChange:e=>p(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-sm",children:"Description"}),r.jsx("textarea",{className:"w-full border rounded px-2 py-1 bg-background",value:m,onChange:e=>x(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-sm",children:"Visibility"}),(0,r.jsxs)("select",{className:"w-full border rounded px-2 py-1 bg-background",value:h,onChange:e=>g(e.target.value),children:[r.jsx("option",{value:"public",children:"Public"}),r.jsx("option",{value:"private",children:"Private"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 pt-1",children:[r.jsx(n.z,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),r.jsx(n.z,{onClick:async()=>{let e=process.env.NEXT_PUBLIC_API_BASE||"http://localhost:4000/api",t=await f(),r=await fetch(`${e}/communities`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""},body:JSON.stringify({name:d,description:m,visibility:h})});if(r.ok){let e=(await r.json()).id;s(s=>[{_id:e,name:d,description:m,members:1},...s]),u(!1),p(""),x(""),g("public")}},children:"Create"})]})]})})]})}},6127:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(1315).createProxy)(String.raw`/workspaces/prico/apps/frontend/app/communities/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[933,760],()=>t(1804));module.exports=r})();